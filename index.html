<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
    </head>
    <body>
        <p id="p"></p>
        <button onclick="buttonGenerate()">Generate</button>
        <script>
            function createProbabilityTable(data) {
                const table = {}

                for (word of data) {
                    let letters = word.split('')

                    for (let i = 0; i < letters.length; i++) {
                        if (!table[letters[i]]) table[letters[i]] = {}

                        if (letters[i + 1]) {
                            table[letters[i]][letters[i + 1]] =
                                table[letters[i]][letters[i + 1]] + 1 || 1
                        }
                    }
                }

                return table
            }
            function chooseNextLetter(table, currentLetter) {
                const letters = table[currentLetter]

                if (!letters) return ''

                const sum = Object.values(letters).reduce((a, b) => a + b, 0)
                let rand = Math.random() * sum

                for (let letter in letters) {
                    rand -= letters[letter]
                    if (rand <= 0) {
                        return letter
                    }
                }

                return ''
            }
            function generateName(table, startLetter, maxLength) {
                let name = startLetter
                let currentLetter = startLetter

                for (let i = 1; i < maxLength; i++) {
                    currentLetter = chooseNextLetter(table, currentLetter)
                    if (currentLetter === ' ') break
                    name += currentLetter
                }
                return name
            }
            function randomInteger(min, max) {
                return Math.floor(min + Math.random() * (max + 1 - min))
            }

            function generateRandomName(names, impossibleStart = []) {
                impossibleStart = impossibleStart.map((letter) =>
                    letter.toUpperCase()
                )

                const probabilityTable = createProbabilityTable(names)
                let startTable = Object.keys(probabilityTable).filter((key) => {
                    return !impossibleStart.includes(key.toUpperCase())
                })

                if (!startTable[0])
                    throw new Error(
                        'Names cannot be empty, or redused by impossibleStart'
                    )

                const newName = generateName(
                    probabilityTable,
                    startTable[randomInteger(0, startTable.length - 1)],
                    randomInteger(4, 10)
                ).split('')
                newName[0] = newName[0].toUpperCase()
                return newName.join('')
            }

            function buttonGenerate() {
                let name = [
                    'Амврос',
                    'Аввакум',
                    'Авдей',
                    'Евдоким',
                    'Евдокия',
                    'Аверк',
                    'Авраам',
                    'Амврос',
                    'Агап',
                    'Агафангел',
                    'Агапит',
                    'Агап',
                    'Агафон',
                    'Агап',
                    'Агафон',
                    'Агафоник',
                    'Агафья',
                    'Аггей',
                    'Агрипин',
                    'Адам',
                    'Акепсим',
                    'Акил',
                    'Иаким',
                    'Иакинф',
                    'Ксения',
                    'Авксент',
                    'Александр',
                    'Алексей',
                    'Аристарх',
                    'Елефер',
                    'Амос',
                    'Анан',
                    'Онуфр',
                    'Андрей',
                    'Адриан',
                    'Андроник',
                    'Андрей',
                    'Аник',
                    'Никандр',
                    'Онисим',
                    'Аник',
                    'Акиндин',
                    'Аня',
                    'Онуфр',
                    'Аникей',
                    'Антип',
                    'Антон',
                    'Евтроп',
                    'Амфилох',
                    'Онисифор',
                    'Артур',
                    'Артем',
                    'Артур',
                    'Артем',
                    'Архип',
                    'Ясон',
                    'Афанас',
                    'Ефимия',
                    'Афанас',
                    'Богдан',
                    'Борис',
                    'Аверк',
                    'Вавил',
                    'Иван',
                    'Варлаам',
                    'Варфоломей',
                    'Васил',
                    'Василиск',
                    'Васил',
                    'Вассиан',
                    'Варфоломей',
                    'Венедикт',
                    'Венедикт',
                    'Вукол',
                    'Влас',
                    'Владимир',
                    'Варфоломей',
                    'Гавриил',
                    'Галактион',
                    'Галин',
                    'Галактион',
                    'Ан',
                    'Гавриил',
                    'Герасим',
                    'Горги',
                    'Герасим',
                    'Гордей',
                    'Григор',
                    'Агрипин',
                    'Григор',
                    'Гур',
                    'Давид',
                    'Демьян',
                    'Даниил',
                    'Дарья',
                    'Девятый',
                    'Демент',
                    'Демид',
                    'Демент',
                    'Денис',
                    'Демид',
                    'Дмитр',
                    'Добрыня',
                    'Домн',
                    'Дорофей',
                    'Евдокия',
                    'Евдоким',
                    'Евлас',
                    'Евсев',
                    'Евстигней',
                    'Евсев',
                    'Евтих',
                    'Евтих',
                    'Ефим',
                    'Иаким',
                    'Елисей',
                    'Елизар',
                    'Елисей',
                    'Елизар',
                    'Луп',
                    'Ефим',
                    'Емельян',
                    'Епимах',
                    'Епифан',
                    'Ефросиния',
                    'Еремей',
                    'Ермак',
                    'Ермак',
                    'Ермолай',
                    'Ерофей',
                    'Евстаф',
                    'Ефим',
                    'Ефрем',
                    'Евтих',
                    'Захар',
                    'Зинов',
                    'Изот',
                    'Ясон',
                    'Иван',
                    'Игнат',
                    'Иов',
                    'Иуд',
                    'Илия',
                    'Илья',
                    'Илья',
                    'Ипат',
                    'Савел',
                    'Исаия',
                    'Исаак',
                    'Исаак',
                    'Иуд',
                    'Яков',
                    'Каллиник',
                    'Никанор',
                    'Капитолин',
                    'Карп',
                    'Екатерин',
                    'Киприан',
                    'Кирилл',
                    'Климент',
                    'Кондрат',
                    'Кузьм',
                    'Конон',
                    'Кондрат',
                    'Конон',
                    'Корнил',
                    'Корнил',
                    'Кузьм',
                    'Константин',
                    'Кубас',
                    'Кузьм',
                    'Кузьм',
                    'Кипреан',
                    'Кипреан',
                    'Кузьм',
                    'Лавр',
                    'Лазарь',
                    'Иларион',
                    'Иларион',
                    'Лев',
                    'Леонт',
                    'Алексей',
                    'Никандр',
                    'Нифонт',
                    'Лонгин',
                    'Лонгин',
                    'Лук',
                    'Гликерия',
                    'Лукьян',
                    'Луп',
                    'Лук',
                    'Мавр',
                    'Макар',
                    'Максим',
                    'Макрин',
                    'Максим',
                    'Мелания',
                    'Малах',
                    'Мамант',
                    'Мануил',
                    'Мария',
                    'Марк',
                    'Мартиниан',
                    'Мартин',
                    'Мартиниан',
                    'Мартин',
                    'Марф',
                    'Марк',
                    'Мария',
                    'Матвей',
                    'Матрон',
                    'Матвей',
                    'Мелания',
                    'Мелет',
                    'Меркур',
                    'Никит',
                    'Никифор',
                    'Михаил',
                    'Николай',
                    'Мин',
                    'Мирон',
                    'Дмитр',
                    'Митрофан',
                    'Дмитр',
                    'Михаил',
                    'Михей',
                    'Михаил',
                    'Максим',
                    'Мок',
                    'Макар',
                    'Мокей',
                    'Малах',
                    'Мануил',
                    'Моисей',
                    'Мокей',
                    'Назар',
                    'Анастасия',
                    'Наум',
                    'Нестор',
                    'Евстаф',
                    'Нестор',
                    'Мефод',
                    'Никит',
                    'Никифор',
                    'Никон',
                    'Николай',
                    'Нифонт',
                    'Евстаф',
                    'Аввакум',
                    'Авраам',
                    'Амврос',
                    'Евдоким',
                    'Авдей',
                    'Евдоким',
                    'Авдей',
                    'Аверк',
                    'Агапит',
                    'Агап',
                    'Агафон',
                    'Аггей',
                    'Агрипин',
                    'Авксент',
                    'Ксения',
                    'Акилин',
                    'Вукол',
                    'Акил',
                    'Алексей',
                    'Олимп',
                    'Елефер',
                    'Ефим',
                    'Емельян',
                    'Амос',
                    'Анан',
                    'Онуфр',
                    'Андрей',
                    'Андроник',
                    'Андрей',
                    'Аник',
                    'Онисим',
                    'Акиндин',
                    'Онисифор',
                    'Онуфр',
                    'Антип',
                    'Антон',
                    'Евтроп',
                    'Онуфр',
                    'Онисифор',
                    'Ареф',
                    'Ирин',
                    'Артем',
                    'Иосиф',
                    'Евстаф',
                    'Остап',
                    'Иосиф',
                    'Афонас',
                    'Ефрем',
                    'Павел',
                    'Памфил',
                    'Панкрат',
                    'Пантелеимон',
                    'Памфил',
                    'Парамон',
                    'Прасковья',
                    'Парфен',
                    'Патрик',
                    'Пахом',
                    'Павел',
                    'Пелаг',
                    'Первый',
                    'Порфир',
                    'Пётр',
                    'Пимен',
                    'Полиевкт',
                    'Поликарп',
                    'Полиевкт',
                    'Помп',
                    'Потап',
                    'Прокоп',
                    'Прохор',
                    'Протас',
                    'Прохор',
                    'Пятый',
                    'Родион',
                    'Роман',
                    'Родион',
                    'Савв',
                    'Севастьян',
                    'Савел',
                    'Савин',
                    'Савв',
                    'Севастьян',
                    'Садок',
                    'Самуил',
                    'Самсон',
                    'Самуил',
                    'Софрон',
                    'Севастьян',
                    'Селиван',
                    'Сильвестр',
                    'Селиван',
                    'Селиван',
                    'Семён',
                    'Сергей',
                    'Исидор',
                    'Сил',
                    'Симон',
                    'Исидор',
                    'Созонт',
                    'Софон',
                    'Софрон',
                    'Софья',
                    'Спиридон',
                    'Остап',
                    'Стах',
                    'Степан',
                    'Степанид',
                    'Сисой',
                    'Тарас',
                    'Татьян',
                    'Терент',
                    'Тимофей',
                    'Тит',
                    'Тихон',
                    'Терент',
                    'Терент',
                    'Трифон',
                    'Трофим',
                    'Увар',
                    'Увар',
                    'Юлиан',
                    'Юстин',
                    'Фадей',
                    'Фалалей',
                    'Ферапонт',
                    'Фот',
                    'Фёдор',
                    'Феодос',
                    'Федот',
                    'Феодосия',
                    'Феофилакт',
                    'Ферапонт',
                    'Фотиния',
                    'Фёдор',
                    'Феофил',
                    'Филимон',
                    'Филип',
                    'Филимон',
                    'Филл',
                    'Филл',
                    'Фирс',
                    'Фок',
                    'Владимир',
                    'Фом',
                    'Фот',
                    'Феофан',
                    'Фок',
                    'Флор',
                    'Харитон',
                    'Харламп',
                    'Харитон',
                    'Шестой',
                    'Иван',
                    'Игнат',
                    'Исаак',
                    'Иуд',
                    'Юр',
                    'Ефим',
                    'Иоаким',
                    'Яков',
                    'Герасим',
                    'Ерофей',
                ]
                var elem = document.getElementById('p')
                elem.innerHTML = generateRandomName(name, ['ь', 'ъ', 'ы', 'й'])
            }
        </script>
    </body>
</html>
